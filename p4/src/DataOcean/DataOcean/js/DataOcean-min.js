"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),Agent=function(){function t(e,n,a,i){_classCallCheck(this,t);var s=!0;this.maxspeed=3,this.maxforce=.05,this.props={};for(var h in i)s&&(s=!1,this.__label=i[h]),this.props[h]=i[h];this.context=e,this.context.font="11px Verdana",this.pos=new Vect(n,a),this.dir=new Vect(2,0),this.dir=VectMath.rotate(this.dir,360*Math.random()),this.acceleration=new Vect(0,0)}return _createClass(t,[{key:"school",value:function(t){var e=this.separate(t);VectMath.scalarMultiply(e,1.5);var n=this.align(t);this.acceleration=VectMath.add(this.acceleration,e),this.acceleration=VectMath.add(this.acceleration,n)}},{key:"separate",value:function(t){var e=this,n=35,a=0,i=new Vect(0,0);return t.forEach(function(t){if(t!==e){var s=VectMath.substract(e.pos,t.pos),h=VectMath.getLength(s);h>0&&n>h&&(s=VectMath.normalize(s),i=VectMath.add(i,s),a++)}}),a>0&&VectMath.scalarMultiply(i,1/a),VectMath.getLength(i)>0&&(i=VectMath.normalize(i),i=VectMath.scalarMultiply(i,this.maxspeed),i=VectMath.substract(i,this.dir)),i}},{key:"align",value:function(t){var e=this,n=50,a=new Vect(0,0),i=0;if(t.forEach(function(t){var s=VectMath.substract(e.pos,t.pos),h=VectMath.getLength(s);h>0&&n>h&&(a=VectMath.add(a,t.velocity),i++)}),i>0){a=VectMath.add(a,1/i),a=VectMath.normalize(a),a=VectMath.scalarMultiply(a,this.maxspeed);var s=VectMath.substract(a,this.dir);return s}return new Vect(0,0)}},{key:"draw",value:function(){this.context.fillStyle="#333333",this.context.beginPath(),this.context.arc(this.pos.x,this.pos.y,10,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),this.context.fillText(this.__label,this.pos.x-10,this.pos.y+20),this.context.beginPath(),this.context.moveTo(this.pos.x,this.pos.y);var t=VectMath.normalize(this.dir);t=VectMath.scalarMultiply(t,20),this.context.lineTo(this.pos.x+t.x,this.pos.y+t.y),this.context.stroke(),this.dir=VectMath.add(this.dir,this.acceleration),this.acceleration=new Vect(0,0),this.pos=VectMath.add(this.pos,this.dir),this.pos.x>this.context.canvas.width+10&&(this.pos.x=-30),this.pos.y>this.context.canvas.height+10&&(this.pos.y=-30),this.pos.x<-30&&(this.pos.x=this.context.canvas.width+10),this.pos.y<-30&&(this.pos.y=this.context.canvas.height+10)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),DataOcean=function(){function t(e){var n=this;return _classCallCheck(this,t),this.canvas=document.getElementById(e),this.width=window.innerWidth,this.height=window.innerHeight,this.agents=[],this.canvas&&this.canvas.getContext?(this.ctx=this.canvas.getContext("2d"),this.intervalID=this.intervalID||window.setInterval(function(){return n.draw()},15)):this.canvas.innerHTML="No Canvas Support.",this}return _createClass(t,[{key:"add",value:function(t){this.agents.push(new Agent(this.ctx,Math.random()*window.innerWidth,Math.random()*window.innerHeight,t))}},{key:"resizeCanvas",value:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;var t=(this.canvas.width-this.width)/2,e=(this.canvas.height-this.height)/2;this.agents.forEach(function(n){n.pos.x+=t,n.pos.y+=e}),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}},{key:"setFullScreen",value:function(t){var e=this;return t&&(window.addEventListener("resize",function(){return e.resizeCanvas()}),this.resizeCanvas()),this}},{key:"draw",value:function(){var t=this;this.ctx.fillStyle="#9FC0D0",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.agents.forEach(function(e){e.school(t.agents),e.draw()})}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),Vect=function(){function t(e,n){_classCallCheck(this,t),this.x=e,this.y=n}return _createClass(t,[{key:"equals",value:function(t){return this.x==t.x&&this.y==t.y}}]),t}(),VectMath=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"add",value:function(t,e){return new Vect(t.x+e.x,t.y+e.y)}},{key:"substract",value:function(t,e){return new Vect(t.x-e.x,t.y-e.y)}},{key:"scalarMultiply",value:function(t,e){return new Vect(t.x*e,t.y*e)}},{key:"scalarProduct",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"getLength",value:function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}},{key:"normalize",value:function(t){var e=this.getLength(t);return new Vect(t.x/e,t.y/e)}},{key:"copy",value:function(t){return new Vect(t.x,t.y)}},{key:"getAngle",value:function(t){return 0==t.x?t.y<=0?Math.PI/2:-Math.PI/2:Math.atan(t.y/t.x)}},{key:"getAngleDegree",value:function(t){return 180*this.getAngle(t)/Math.PI}},{key:"offset",value:function(t,e){var n=getAngle(t),a=Math.sin(n)*e,i=Math.cos(n)*e;return a=t.x>0?a:-a,i=t.x>0?i:-i,new Vect(i,a)}},{key:"rotate",value:function(t,e){var n=t.y*Math.sin(e)+t.x*Math.cos(e),a=t.y*Math.cos(e)-t.x*Math.sin(e);return new Vect(n,a)}}]),t}();